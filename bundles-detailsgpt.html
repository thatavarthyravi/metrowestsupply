<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UT | Catalog</title>
  <link rel="stylesheet" href="newstyles.css" />

  <!-- Page-specific styles for the horizontal product tiles -->
  <style>
    /* Keep typography/colors consistent with newstyles.css; only layout here */

    .catalog-toolbar {
      padding: 22px 40px 0;
    }

    .catalog-toolbar .row {
      display: flex;
      gap: 14px;
      flex-wrap: wrap;
      align-items: flex-end;
      justify-content: space-between;
      margin-top: 14px;
    }

    .field {
      display: grid;
      gap: 8px;
      min-width: 320px;
      flex: 1;
    }

    .field label {
      font-size: 0.85rem;
      color: #eaf6ff;
      opacity: 0.95;
    }

    .field select {
      border-radius: 6px;
      border: 1px solid rgba(255,255,255,0.25);
      padding: 12px 12px;
      font-size: 0.95rem;
      outline: none;
      background: rgba(255,255,255,0.95);
      color: #123;
    }

    .bundle-meta {
      padding: 0 40px 18px;
      font-size: 0.85rem;
      color: #cceeff;
      display: flex;
      gap: 18px;
      flex-wrap: wrap;
      opacity: 0.95;
    }
    .bundle-meta b { color: #ffffff; }

    .status {
      padding: 10px 40px 0;
      font-size: 0.9rem;
      color: #cceeff;
    }

    /* Sections under the hero use white background area already (feature-grid-section) */
    .catalog-content {
      padding: 24px 40px 30px;
      background: white;
    }

    .category-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin: 18px 0 10px;
    }

    .category-header h3 {
      margin: 0;
      color: var(--navy);
      font-size: 1.05rem;
    }

    .pill {
      font-size: 0.75rem;
      background: var(--light-grey);
      color: #444;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid #e6e6e6;
      white-space: nowrap;
    }

    /* Horizontal tile rail */
    .rail {
      display: flex;
      gap: 16px;
      overflow-x: auto;
      padding: 8px 0 18px;
      scroll-snap-type: x mandatory;
    }

    .rail::-webkit-scrollbar { height: 10px; }
    .rail::-webkit-scrollbar-thumb {
      background: rgba(26,42,68,0.25);
      border-radius: 999px;
      border: 2px solid rgba(244,244,244,0.9);
    }

    .tile {
      flex: 0 0 300px;
      scroll-snap-align: start;
      border: 1px solid #e5e5e5;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0,0,0,0.06);
      background: white;
      display: grid;
      grid-template-rows: 165px auto;
    }

    .tile-media {
      position: relative;
      background: var(--light-grey);
    }

    .tile-media img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .price-badge {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(26,42,68,0.92);
      color: white;
      padding: 6px 10px;
      font-size: 0.78rem;
      border-radius: 999px;
    }

    .tile-body {
      padding: 12px 12px 14px;
      display: grid;
      gap: 10px;
    }

    .tile-title {
      font-weight: 800;
      color: var(--navy);
      line-height: 1.25;
      font-size: 0.98rem;
    }

    .kv {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      font-size: 0.85rem;
      color: #555;
    }

    .kv b { color: #111; }

    .label {
      font-size: 0.8rem;
      color: #666;
      margin-top: 2px;
      font-weight: 700;
    }

    .chips {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .chip {
      font-size: 0.72rem;
      color: #444;
      border: 1px solid #e3e3e3;
      padding: 4px 8px;
      border-radius: 999px;
      background: #fff;
    }

    .actions {
      display: flex;
      gap: 10px;
      margin-top: 2px;
    }

    .btn-link {
      background-color: var(--orange);
      color: var(--white);
      padding: 10px 12px;
      text-decoration: none;
      border-radius: 4px;
      font-weight: bold;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 0.8rem;
      flex: 1;
      border: 0;
      cursor: pointer;
    }

    .btn-link.secondary {
      background: var(--light-grey);
      color: var(--navy);
      border: 1px solid #ddd;
    }

    .error {
      margin: 10px 40px 0;
      padding: 12px 14px;
      border: 1px solid rgba(255,102,0,.35);
      background: rgba(255,102,0,.08);
      border-radius: 8px;
      color: #7a2c00;
      font-size: 0.9rem;
    }

    @media (max-width: 768px) {
      .catalog-toolbar { padding: 18px 20px 0; }
      .bundle-meta { padding: 0 20px 14px; }
      .status { padding: 10px 20px 0; }
      .catalog-content { padding: 18px 20px 22px; }
      .field { min-width: 240px; }
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- Top Navy Blue Header (same as index) -->
    <header>
      <div class="header-left">
        <img src="logo.png" alt="UT Logo" class="logo-small" />
        <span>Unit Turn Supply</span>
      </div>
      <nav class="nav-menu">
        <a href="catalog.html">Catalog</a>
        <a href="bundles.html">Bundles</a>
        <div class="menu-toggle" id="mobile-menu">
          <span></span><span></span><span></span>
        </div>
      </nav>
    </header>

    <!-- Hero Section (same styling; content customized for Catalog) -->
    <div class="hero-section">
      <div class="hero-text">
        <h1>Catalog <br><span class="orange-text">Bundle Items</span></h1>
        <p>Select a bundle to browse all included items as tiles. Each tile links out to a product details page.</p>

        <div class="catalog-toolbar">
          <div class="row">
            <div class="field">
              <label for="bundleSelect">Select Bundle</label>
              <select id="bundleSelect" disabled></select>
            </div>

            <div class="hero-btns" style="margin-top: 0;">
              <a href="order-form.html" class="btn-white-outline">Order Now</a>
              <button class="btn-orange" id="reloadBtn" type="button">Reload JSON</button>
            </div>
          </div>
        </div>

        <div class="bundle-meta" id="bundleMeta"></div>
      </div>

      <img src="logo.png" alt="UT Main Logo" class="main-logo" />
    </div>

    <!-- White content section -->
    <div class="feature-grid-section" style="padding: 0; background: white;">
      <div class="status" id="status"></div>
      <div class="catalog-content" id="content"></div>
    </div>

    <div class="brand-strip">
      <p>Trusted Brands: Benjamin Moore • PPG • Leviton • Lutron • Moen • Delta • 3M • Oatey</p>
    </div>

  </div>

  <footer>
    <a href="privacy.html">Unit Turn Supply</a>
  </footer>

  <script src="menu.js"></script>

  <script>
    // ✅ Loads your file from /data/products.json
    const DATA_URL = "data/products.json";

    // External product page + image mapping (representative; swap to SKU-accurate later if needed)
    const PRODUCT_CATALOG = {
      "Interior wall paint (5-gal, contractor grade)": { url:"https://www.sherwin-williams.com/homeowners/products/promar-200-zero-voc-interior-latex", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8c/Paint_can.jpg/640px-Paint_can.jpg" },
      "Interior wall paint, 5-gal": { url:"https://www.sherwin-williams.com/homeowners/products/promar-200-zero-voc-interior-latex", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8c/Paint_can.jpg/640px-Paint_can.jpg" },
      "Ceiling paint, 5-gal": { url:"https://www.sherwin-williams.com/homeowners/products/premium-ceiling-paint", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/White_paint_bucket.jpg/640px-White_paint_bucket.jpg" },
      "Lightweight drywall compound (3–3.5 gal)": { url:"https://www.usg.com/content/usgcom/en/products/walls/drywall/joint-compound/lightweight/all-purpose.html", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Joint_compound.jpg/640px-Joint_compound.jpg" },
      "Drywall patch kit": { url:"https://www.3m.com/3M/en_US/p/d/b00037372/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/67/Drywall_repair_patch.jpg/640px-Drywall_repair_patch.jpg" },
      "Acrylic latex caulk (white)": { url:"https://www.dap.com/products-projects/product-categories/caulks-sealants/latex-caulk/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Caulk_gun.jpg/640px-Caulk_gun.jpg" },

      "Roller covers (9”, ½” nap)": { url:"https://woosterbrush.com/product-category/rollers/roller-covers/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/06/Paint_roller.jpg/640px-Paint_roller.jpg" },
      "Roller covers (9\", 1/2\" nap)": { url:"https://woosterbrush.com/product-category/rollers/roller-covers/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/06/Paint_roller.jpg/640px-Paint_roller.jpg" },
      "Roller frames": { url:"https://www.purdy.com/products/rollers-frames", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/Paint_roller_frame.jpg/640px-Paint_roller_frame.jpg" },
      "Paint trays + liners": { url:"https://woosterbrush.com/product-category/trays-liners/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Paint_tray.jpg/640px-Paint_tray.jpg" },
      "Paint trays & liners": { url:"https://woosterbrush.com/product-category/trays-liners/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Paint_tray.jpg/640px-Paint_tray.jpg" },
      "Contractor-grade brushes": { url:"https://www.purdy.com/products/brushes", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2b/Paintbrush.jpg/640px-Paintbrush.jpg" },
      "Painter’s tape (1.5”–2”)": { url:"https://www.scotchblue.com/3M/en_US/scotchblue/products/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/39/Masking_tape.jpg/640px-Masking_tape.jpg" },
      "Painter’s tape (1.5\"–2\")": { url:"https://www.scotchblue.com/3M/en_US/scotchblue/products/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/39/Masking_tape.jpg/640px-Masking_tape.jpg" },

      "LED A19 bulbs (soft white, bulk)": { url:"https://www.usa.lighting.philips.com/consumer/bulbs/led-bulbs", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/LED_bulb.jpg/640px-LED_bulb.jpg" },
      "LED A19 bulbs (bulk pack)": { url:"https://www.usa.lighting.philips.com/consumer/bulbs/led-bulbs", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/LED_bulb.jpg/640px-LED_bulb.jpg" },
      "Decora switches": { url:"https://leviton.com/products/5603-2w", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/43/Light_switch.jpg/640px-Light_switch.jpg" },
      "Decora outlets": { url:"https://store.leviton.com/collections/decora-receptacles", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Electrical_outlet.jpg/640px-Electrical_outlet.jpg" },
      "Wall plates (1–2 gang)": { url:"https://store.leviton.com/collections/decora-wallplates", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Wall_plate.jpg/640px-Wall_plate.jpg" },

      "HVAC filter (common sizes)": { url:"https://www.lowes.com/pd/Filtrete-Common-20-in-x-25-in-x-1-in-Actual-24-72-in-x-19-72-in-x-1-13-in-Electrostatic-Pleated-Air-Filter/1000420751", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Air_filter.jpg/640px-Air_filter.jpg" },
      "HVAC filters (common sizes)": { url:"https://www.lowes.com/pd/Filtrete-Common-20-in-x-25-in-x-1-in-Actual-24-72-in-x-19-72-in-x-1-13-in-Electrostatic-Pleated-Air-Filter/1000420751", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Air_filter.jpg/640px-Air_filter.jpg" },
      "Basic cleaning kit (broom, mop, chemicals)": { url:"https://www.rubbermaidcommercial.com/cleaning/mops/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Mop_and_bucket.jpg/640px-Mop_and_bucket.jpg" },
      "Basic cleaning kit": { url:"https://www.rubbermaidcommercial.com/cleaning/mops/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Mop_and_bucket.jpg/640px-Mop_and_bucket.jpg" },

      "Smoke detectors (10-year sealed battery)": { url:"https://www.firstalert.com/us/en/products/alarms/smoke-alarms/10-year-sealed-battery-smoke-alarm-with-photoelectric-sensor-pr710/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Smoke_detector.jpg/640px-Smoke_detector.jpg" },
      "Smoke detectors (10-year)": { url:"https://www.firstalert.com/us/en/products/alarms/smoke-alarms/10-year-sealed-battery-smoke-alarm-with-photoelectric-sensor-pr710/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Smoke_detector.jpg/640px-Smoke_detector.jpg" },
      "CO detectors": { url:"https://www.kidde.com/home-safety/en/us/products/smoke-co-alarms/carbon-monoxide-alarms/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/12/Carbon_monoxide_alarm.jpg/640px-Carbon_monoxide_alarm.jpg" },
      "Fire extinguisher (ABC, small)": { url:"https://www.kidde.com/home-safety/en/us/products/fire-extinguishers/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Fire_extinguisher.jpg/640px-Fire_extinguisher.jpg" },
      "Fire extinguisher (ABC)": { url:"https://www.kidde.com/home-safety/en/us/products/fire-extinguishers/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Fire_extinguisher.jpg/640px-Fire_extinguisher.jpg" },

      "Flush-mount LED ceiling lights": { url:"https://lithonia.acuitybrands.com/products/indoor-lighting/ceiling-mount", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Ceiling_light_fixture.jpg/640px-Ceiling_light_fixture.jpg" },
      "Flush-mount LED ceiling light": { url:"https://lithonia.acuitybrands.com/products/indoor-lighting/ceiling-mount", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Ceiling_light_fixture.jpg/640px-Ceiling_light_fixture.jpg" },
      "GFCI outlet (bath/kitchen)": { url:"https://www.eaton.com/us/en-us/catalog/wiring-devices/gfci-receptacles.html", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/27/GFCI_outlet.jpg/640px-GFCI_outlet.jpg" },
      "GFCI outlet": { url:"https://www.eaton.com/us/en-us/catalog/wiring-devices/gfci-receptacles.html", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/27/GFCI_outlet.jpg/640px-GFCI_outlet.jpg" },

      "Universal toilet repair kit": { url:"https://www.fluidmaster.com/products/toilet/complete-toilet-repair-kits/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Toilet_tank_internals.jpg/640px-Toilet_tank_internals.jpg" },
      "Toilet supply line": { url:"https://www.siouxchief.com/products/supply/supply-lines", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0e/Flexible_supply_line.jpg/640px-Flexible_supply_line.jpg" },
      "Faucet aerators": { url:"https://www.neoperl.com/en/products/aerators/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Faucet_aerator.jpg/640px-Faucet_aerator.jpg" },
      "PTFE thread seal tape": { url:"https://www.oatey.com/products/oatey-ptfe-white-general-purpose-thread-seal-tape--1680494038", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/66/Thread_seal_tape.jpg/640px-Thread_seal_tape.jpg" },

      "Decorative LED ceiling fixtures": { url:"https://www.progresslighting.com/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/45/Pendant_light.jpg/640px-Pendant_light.jpg" },
      "Decorative LED ceiling fixture": { url:"https://www.progresslighting.com/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/45/Pendant_light.jpg/640px-Pendant_light.jpg" },
      "Bathroom faucet (mid-tier)": { url:"https://shop.moen.com/collections/bathroom-faucets", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4c/Bathroom_faucet.jpg/640px-Bathroom_faucet.jpg" },
      "Kitchen faucet (mid-tier)": { url:"https://www.deltafaucet.com/kitchen", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Kitchen_faucet.jpg/640px-Kitchen_faucet.jpg" },

      "Sink trap kits": { url:"https://www.oatey.com/products", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/23/P-trap_under_sink.jpg/640px-P-trap_under_sink.jpg" },
      "Sink trap kit": { url:"https://www.oatey.com/products", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/23/P-trap_under_sink.jpg/640px-P-trap_under_sink.jpg" },
      "Silicone sealant (clear)": { url:"https://www.gesealants.com/products/silicone/", img:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Silicone_sealant.jpg/640px-Silicone_sealant.jpg" }
    };

    let DATA = null;

    function money(n, currency) {
      if (typeof n !== "number") return "";
      return new Intl.NumberFormat("en-US", { style: "currency", currency }).format(n);
    }

    function flattenBundle(bundleId) {
      const byId = Object.fromEntries((DATA.bundles || []).map(b => [b.bundle_id, b]));
      const visited = new Set();

      function collect(id) {
        if (!byId[id] || visited.has(id)) return { categories: [] };
        visited.add(id);

        const b = byId[id];
        const cats = [];

        (b.includes || []).forEach(dep => {
          const depData = collect(dep);
          cats.push(...depData.categories);
        });

        cats.push(...(b.categories || []));
        return { bundle: b, categories: cats };
      }
      return collect(bundleId);
    }

    function renderBundle(bundleId) {
      const { bundle, categories } = flattenBundle(bundleId);
      const content = document.getElementById("content");
      const meta = document.getElementById("bundleMeta");

      meta.innerHTML = [
        bundle.target_customer ? `<span><b>Target:</b> ${bundle.target_customer}</span>` : "",
        bundle.use_case ? `<span><b>Use case:</b> ${bundle.use_case}</span>` : "",
        bundle.goal ? `<span><b>Goal:</b> ${bundle.goal}</span>` : "",
        bundle.includes ? `<span><b>Includes:</b> ${(bundle.includes || []).join(", ")}</span>` : ""
      ].filter(Boolean).join("");

      content.innerHTML = "";

      categories.forEach(cat => {
        const section = document.createElement("div");

        const header = document.createElement("div");
        header.className = "category-header";
        header.innerHTML = `<h3>${cat.category}</h3><span class="pill">${(cat.items || []).length} items</span>`;
        section.appendChild(header);

        const rail = document.createElement("div");
        rail.className = "rail";

        (cat.items || []).forEach(item => {
          const key = item.product;
          const catalog = PRODUCT_CATALOG[key] || {};
          const img = catalog.img || "https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/640px-No_image_available.svg.png";
          const url = catalog.url || ("https://www.google.com/search?q=" + encodeURIComponent(key));

          const tile = document.createElement("div");
          tile.className = "tile";

          tile.innerHTML = `
            <div class="tile-media">
              <img src="${img}" alt="${key}" loading="lazy" referrerpolicy="no-referrer" />
              <div class="price-badge">${money(item.unit_cost_estimate, DATA.currency || "USD")} ea</div>
            </div>
            <div class="tile-body">
              <div class="tile-title">${key}</div>
              <div class="kv"><span>Qty (typ.)</span><b>${item.typical_quantity ?? ""}</b></div>

              <div class="label">Brands</div>
              <div class="chips">
                ${(item.brands || []).slice(0, 6).map(b => `<span class="chip">${b}</span>`).join("") || `<span class="chip">—</span>`}
              </div>

              <div class="label">Suppliers</div>
              <div class="chips">
                ${(item.suppliers || []).slice(0, 6).map(s => `<span class="chip">${s}</span>`).join("") || `<span class="chip">—</span>`}
              </div>

              <div class="actions">
                <a class="btn-link" href="${url}" target="_blank" rel="noopener noreferrer">View product ↗</a>
                <button class="btn-link secondary" type="button" data-copy="${url}">Copy link</button>
              </div>
            </div>
          `;

          rail.appendChild(tile);
        });

        section.appendChild(rail);
        content.appendChild(section);
      });

      // copy link buttons
      content.querySelectorAll("button[data-copy]").forEach(btn => {
        btn.addEventListener("click", async () => {
          const link = btn.getAttribute("data-copy");
          try {
            await navigator.clipboard.writeText(link);
            const prev = btn.textContent;
            btn.textContent = "Copied!";
            setTimeout(() => (btn.textContent = prev), 900);
          } catch {
            window.prompt("Copy this link:", link);
          }
        });
      });
    }

    async function loadData() {
      const status = document.getElementById("status");
      status.textContent = "Loading products…";

      try {
        const res = await fetch(DATA_URL, { cache: "no-store" });
        if (!res.ok) throw new Error(`Fetch failed: ${res.status} ${res.statusText}`);
        DATA = await res.json();

        const select = document.getElementById("bundleSelect");
        select.innerHTML = "";
        (DATA.bundles || []).forEach(b => {
          const opt = document.createElement("option");
          opt.value = b.bundle_id;
          opt.textContent = `${b.bundle_id} — ${b.name || ""}`;
          select.appendChild(opt);
        });

        select.disabled = false;
        select.onchange = (e) => renderBundle(e.target.value);

        status.textContent = "";
        renderBundle(DATA.bundles?.[0]?.bundle_id);
      } catch (err) {
        status.innerHTML = `<div class="error"><b>Could not load:</b> ${DATA_URL}<br/>${String(err)}</div>`;
      }
    }

    document.getElementById("reloadBtn").addEventListener("click", loadData);
    loadData();
  </script>
</body>
</html>
